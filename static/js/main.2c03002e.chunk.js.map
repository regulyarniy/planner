{"version":3,"sources":["Store.js","components/Step.js","components/StageInfo.js","constants.js","components/AddItem.js","components/Stage.js","components/Layout.js","components/Popup.js","App.js","index.js"],"names":["Store","React","createContext","Step","_this$props","this","props","name","time","react_default","a","createElement","className","title","elements","context","items","reduce","elementsList","elementKey","concat","key","type","PureComponent","contextType","StageInfo","steps","stepsList","stepKey","ElementType","STAGE","STEP","STAGE__ROUTE","STEP_ROUTE","AddItem","history","parentKey","isStage","onAdd","push","onClick","withRouter","Stage","employee","id","components_StageInfo","length","components_AddItem","components_Step","Layout","stages","_this$context","listOfStages","stagesList","stageKey","components_Stage","Popup","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","match","params","handleClose","bind","assertThisInitialized","_this2","_this$state","action","path","indexOf","onSubmit","handleSubmit","htmlFor","value","required","placeholder","onChange","evt","setState","target","pattern","goBack","form","currentTarget","preventDefault","checkValidity","stopPropagation","_this$state2","addStage","addStep","App","api","saveState","loadState","BrowserRouter","basename","process","src_Store","Provider","assign","components_Layout","Route","component","localStorage","setItem","JSON","stringify","getItem","parse","data","newStages","newKey","uuid","newListOfStages","slice","newSteps","newItems","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.2c03002e.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Store = React.createContext({});\n\nexport default Store;\n","import React, {PureComponent} from \"react\";\nimport Store from \"../Store\";\n\nclass Step extends PureComponent {\n  get elements() {\n    const {elements} = this.context;\n    const {items} = this.props;\n    return items.reduce((elementsList, elementKey) => elementsList.concat(\n      [\n        <button\n          key={elementKey}\n          className=\"element step__element\"\n          type=\"button\"\n          title={elements[elementKey].name}\n        >\n          <span>{elements[elementKey].name}</span>\n        </button>\n      ]\n    ), [])\n  }\n\n  render() {\n    const {name, time} = this.props;\n    return (\n      <section className=\"step stage__step\">\n        <h3 className=\"step__title\" title={name}>{name}</h3>\n        <p className=\"step__time\">\n          <span>Время</span>\n          <b>{time}</b>\n        </p>\n        {this.elements}\n      </section>\n    )\n  }\n}\n\nStep.contextType = Store;\n\nexport default Step;\n","import React, {PureComponent} from \"react\";\nimport Store from \"../Store\";\n\nclass StageInfo extends PureComponent {\n  get elements() {\n    const {steps} = this.context;\n    const {items} = this.props;\n    return items.reduce((stepsList, stepKey) => stepsList.concat(\n      [\n        <button\n          key={stepKey}\n          className=\"element stage__element\"\n          type=\"button\"\n          title={steps[stepKey].name}\n        >\n          <span>{steps[stepKey].name}</span>\n        </button>\n      ]\n    ), [])\n  }\n  render() {\n    const {name, time} = this.props;\n    return (\n      <header className=\"stage__info\">\n        <button className=\"stage__collapse stage__collapse--closed\" type=\"button\" title=\"Свернуть\\Развернуть\"/>\n        <div className=\"stage__row\">\n          <h2 className=\"stage__title\" title={name}>{name}</h2>\n          <p className=\"stage__time\">\n            <span>Время</span>\n            <b>{time}</b>\n          </p>\n          {this.elements}\n        </div>\n      </header>\n    )\n  }\n}\n\nStageInfo.contextType = Store;\n\nexport default StageInfo;\n","export const ElementType = {\n  STAGE: `этап`,\n  STEP: `шаг`,\n  STAGE__ROUTE: `stage`,\n  STEP_ROUTE: `step`\n};\n","import React, {PureComponent} from \"react\";\nimport {ElementType} from \"../constants\";\nimport {withRouter} from \"react-router-dom\";\n\nclass AddItem extends PureComponent {\n  render() {\n    const {type, history, parentKey} = this.props;\n    const {STAGE, STEP, STAGE__ROUTE, STEP_ROUTE} = ElementType;\n    const isStage = type === STAGE;\n    const onAdd = isStage ? () => history.push(`/add/${STAGE__ROUTE}`) : () => history.push(`/add/${STEP_ROUTE}/${parentKey}`);\n    return (\n      <footer className=\"add-item\">\n        <h2 className=\"visually-hidden\">Добавление {isStage ? `${STAGE}а` : `${STEP}а`}</h2>\n        <button className=\"add-item__button\" type=\"button\" onClick={onAdd}><span>Добавить {isStage ? STAGE : STEP}</span></button>\n      </footer>\n    )\n  }\n}\n\nexport default withRouter(AddItem);\n","import React, {PureComponent} from \"react\";\nimport Step from \"./Step\";\nimport StageInfo from \"./StageInfo\";\nimport AddItem from \"./AddItem\";\nimport {ElementType} from \"../constants\";\nimport Store from \"../Store\";\n\nclass Stage extends PureComponent {\n  get steps() {\n    const {steps} = this.context;\n    const {items} = this.props;\n    return items.reduce((stepsList, stepKey) => stepsList.concat(\n      [<Step\n        key={stepKey}\n        name={steps[stepKey].name}\n        time={steps[stepKey].time}\n        items={steps[stepKey].items}\n      />]\n    ), [])\n  }\n  render() {\n    const {name, time, employee, items, id} = this.props;\n    return (\n      <section className=\"stage process__stage\">\n        <StageInfo name={name} time={time} employee={employee} items={items}/>\n        {this.steps}\n        {items.length < 3 ? <AddItem type={ElementType.STEP} parentKey={id}/> : null}\n      </section>\n    )\n  }\n}\n\nStage.contextType = Store;\n\nexport default Stage;\n","import React, {PureComponent} from \"react\";\nimport Stage from \"./Stage\";\nimport Store from \"../Store\";\n\nclass Layout extends PureComponent {\n  get stages() {\n    const {listOfStages, stages} = this.context;\n    return listOfStages.reduce((stagesList, stageKey) => stagesList.concat(\n      [<Stage\n        key={stageKey}\n        id={stageKey}\n        name={stages[stageKey].name}\n        employee={stages[stageKey].employee}\n        time={stages[stageKey].time}\n        items={stages[stageKey].items}\n      />]\n    ), [])\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <section className=\"process\">\n          <h1 className=\"visually-hidden\">Конструктор процесса</h1>\n          <p className=\"process__start\"><span>Старт</span></p>\n          {this.stages}\n        </section>\n      </div>\n    )\n  }\n}\n\nLayout.contextType = Store;\n\nexport default Layout;\n","import React, {PureComponent} from \"react\";\nimport {ElementType} from \"../constants\";\nimport Store from \"../Store\";\n\nclass Popup extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: ``,\n      employee: ``,\n      time: ``\n    };\n    const {STAGE__ROUTE, STAGE, STEP} = ElementType;\n    this.type = this.props.match.params.type === STAGE__ROUTE ? STAGE : STEP;\n    this.handleClose = this.handleClose.bind(this);\n  }\n\n  render() {\n    const {match} = this.props;\n    const {name, employee, time} = this.state;\n    const action = match.path.indexOf(`add`) !== -1 ? `Создать` : `Редактировать`;\n\n    return (\n      <section className=\"popup\">\n        <h2 className=\"visually-hidden\">Всплывающее окно</h2>\n        <div className=\"popup__overlay\" onClick={this.handleClose}/>\n        <form\n          className=\"popup__form\"\n          onSubmit={this.handleSubmit.bind(this)}\n        >\n          <div className=\"popup__wrapper\">\n            <h2 className=\"popup__title\">{action} {this.type}</h2>\n            <label className=\"popup__label\" htmlFor=\"popup__name\">Название:</label>\n            <input\n              className=\"popup__input-text\"\n              value={name}\n              required\n              type=\"text\"\n              placeholder={`Название ${this.type}а..`}\n              id=\"popup__name\"\n              onChange={(evt) => this.setState({name: evt.target.value})}\n            />\n            <label className=\"popup__label\" htmlFor=\"popup__employee\">Ответственный:</label>\n            <input\n              className=\"popup__input-text\"\n              value={employee}\n              required\n              type=\"text\"\n              placeholder=\"Иванов Иван..\"\n              id=\"popup__employee\"\n              onChange={(evt) => this.setState({employee: evt.target.value})}\n            />\n            <label className=\"popup__label\" htmlFor=\"popup__time\">Время на выполнение(ЧЧ:ММ):</label>\n            <input\n              className=\"popup__input-text\"\n              value={time}\n              required pattern=\"[0-9]{2}[:][0-9]{2}\"\n              type=\"text\"\n              placeholder=\"45:00\"\n              id=\"popup__time\"\n              onChange={(evt) => this.setState({time: evt.target.value})}\n            />\n            <div className=\"popup__buttons\">\n              <button className=\"popup__button popup__button--cancel\" type=\"button\" onClick={this.handleClose}>Отмена\n              </button>\n              <button className=\"popup__button popup__button--submit\" type=\"submit\">Сохранить</button>\n            </div>\n          </div>\n        </form>\n      </section>\n    )\n  }\n\n  handleClose() {\n    this.props.history.goBack();\n  }\n\n  handleSubmit(evt) {\n    const form = evt.currentTarget;\n    evt.preventDefault();\n    if (form.checkValidity() === false) {\n      evt.stopPropagation();\n    } else {\n      evt.preventDefault();\n      const {name, employee, time} = this.state;\n      if (this.type === ElementType.STAGE) {\n        this.context.addStage({name, employee, time});\n      } else {\n        this.context.addStep({name, employee, time}, this.props.match.params.parentKey);\n      }\n      this.props.history.push(`/`);\n    }\n  }\n\n}\n\nPopup.contextType = Store;\n\nexport default Popup;\n","import React, {Component} from 'react';\nimport \"./scss/style.scss\";\nimport Layout from \"./components/Layout\";\nimport {BrowserRouter as Router, Route} from \"react-router-dom\";\nimport Popup from \"./components/Popup\";\nimport AddItem from \"./components/AddItem\";\nimport {ElementType} from \"./constants\";\nimport Store from \"./Store\";\nimport uuid from \"uuid/v4\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      listOfStages: [],\n      stages: {},\n      steps: {},\n      elements: {}\n    };\n    this.api = {\n      saveState: this.saveState.bind(this),\n      addStage: this.addStage.bind(this),\n      addStep: this.addStep.bind(this)\n    }\n  }\n\n  componentDidMount() {\n    this.loadState();\n  }\n\n  componentDidUpdate() {\n    this.saveState();\n  }\n\n  render() {\n    return (\n      <Router basename={process.env.PUBLIC_URL}>\n        <Store.Provider value={Object.assign({}, this.state, this.api)}>\n          <Layout/>\n          <AddItem type={ElementType.STAGE}/>\n          <Route path=\"/add/:type/:parentKey?\" component={Popup}/>\n        </Store.Provider>\n      </Router>\n    );\n  }\n\n  saveState() {\n    localStorage.setItem(`state`, JSON.stringify(this.state));\n  }\n\n  loadState() {\n    const state = localStorage.getItem(`state`);\n    if (state !== null) {\n      this.setState(JSON.parse(state));\n    }\n  }\n\n  addStage(data) {\n    const newStages = JSON.parse(JSON.stringify(this.state.stages));\n    const newKey = uuid();\n    newStages[newKey] = Object.assign({}, data, {items: []});\n    const newListOfStages = this.state.listOfStages.slice();\n    newListOfStages.push(newKey);\n    this.setState({listOfStages: newListOfStages,stages: newStages});\n  }\n\n  addStep(data, stageKey) {\n    const newSteps = JSON.parse(JSON.stringify(this.state.steps));\n    const newKey = uuid();\n    newSteps[newKey] = Object.assign({}, data, {items: []});\n    const newItems = this.state.stages[stageKey].items.slice();\n    newItems.push(newKey);\n    const newStages = JSON.parse(JSON.stringify(this.state.stages));\n    newStages[stageKey].items = newItems;\n    this.setState({stages: newStages, steps: newSteps});\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById(`root`));\n"],"sourceRoot":""}