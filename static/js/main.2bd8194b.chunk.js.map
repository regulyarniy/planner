{"version":3,"sources":["Store.js","constants.js","components/Step.js","components/StageInfo.js","components/AddItem.js","components/Stage.js","components/Layout.js","components/Popup.js","App.js","index.js"],"names":["Store","React","createContext","ElementType","Step","_this$props","this","props","name","time","react_default","a","createElement","className","title","elements","context","_this$props2","items","id","history","addButton","key","onClick","push","concat","listItems","reduce","elementsList","elementKey","type","length","Object","toConsumableArray","Component","withRouter","contextType","StageInfo","steps","stepsList","stepKey","PureComponent","AddItem","parentKey","STAGE","STEP","STAGE__ROUTE","STEP_ROUTE","isStage","onAdd","Stage","employee","components_StageInfo","components_AddItem","components_Step","Layout","stages","_this$context","listOfStages","stagesList","stageKey","components_Stage","Popup","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","handleClose","bind","assertThisInitialized","_this2","match","_this$state","action","path","indexOf","onSubmit","handleSubmit","htmlFor","value","required","placeholder","onChange","evt","setState","target","pattern","goBack","form","currentTarget","preventDefault","checkValidity","stopPropagation","_this$state2","ITEM","addStage","addStep","params","addItem","ITEM_ROUTE","App","api","saveState","loadState","BrowserRouter","basename","process","src_Store","Provider","assign","components_Layout","Route","component","localStorage","setItem","JSON","stringify","getItem","parse","data","newStages","newKey","uuid","newListOfStages","slice","newSteps","newItems","newElements","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.2bd8194b.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Store = React.createContext({});\n\nexport default Store;\n","export const ElementType = {\n  STAGE: `этап`,\n  STEP: `шаг`,\n  ITEM: `элемент`,\n  STAGE__ROUTE: `stage`,\n  STEP_ROUTE: `step`,\n  ITEM_ROUTE: `item`\n};\n","import React, {Component} from \"react\";\nimport Store from \"../Store\";\nimport {withRouter} from \"react-router-dom\";\nimport {ElementType} from \"../constants\";\n\nclass Step extends Component {\n  get elements() {\n    const {elements} = this.context;\n    const {items, id, history} = this.props;\n    const addButton = (\n      <button\n        key={`add`}\n        className=\"element element--add step__element\"\n        onClick={() => history.push(`/add/${ElementType.ITEM_ROUTE}/${id}`)}\n      />\n    );\n    const listItems = items.reduce((elementsList, elementKey) => elementsList.concat(\n      [\n        <button\n          key={elementKey}\n          className=\"element step__element\"\n          type=\"button\"\n          title={elements[elementKey].name}\n        >\n          <span>{elements[elementKey].name}</span>\n        </button>\n      ]\n    ), []);\n    switch (items.length) {\n      case 0:\n        return [addButton];\n      case 1:\n      case 2:\n        return [...listItems, addButton];\n      case 3:\n        return [...listItems];\n      default:\n        return null;\n    }\n\n  }\n\n  render() {\n    const {name, time} = this.props;\n    return (\n      <section className=\"step stage__step\">\n        <h3 className=\"step__title\" title={name}>{name}</h3>\n        <p className=\"step__time\">\n          <span>Время</span>\n          <b>{time}</b>\n        </p>\n        {this.elements}\n      </section>\n    )\n  }\n}\n\nexport default withRouter(Step);\n\nStep.contextType = Store; // set context type after export because issue https://github.com/facebook/react/issues/14061\n","import React, {PureComponent} from \"react\";\nimport Store from \"../Store\";\n\nclass StageInfo extends PureComponent {\n  get elements() {\n    const {steps} = this.context;\n    const {items} = this.props;\n    return items.reduce((stepsList, stepKey) => stepsList.concat(\n      [\n        <button\n          key={stepKey}\n          className=\"element stage__element\"\n          type=\"button\"\n          title={steps[stepKey].name}\n        >\n          <span>{steps[stepKey].name}</span>\n        </button>\n      ]\n    ), [])\n  }\n  render() {\n    const {name, time} = this.props;\n    return (\n      <header className=\"stage__info\">\n        <button className=\"stage__collapse stage__collapse--closed\" type=\"button\" title=\"Свернуть\\Развернуть\"/>\n        <div className=\"stage__row\">\n          <h2 className=\"stage__title\" title={name}>{name}</h2>\n          <p className=\"stage__time\">\n            <span>Время</span>\n            <b>{time}</b>\n          </p>\n          {this.elements}\n        </div>\n      </header>\n    )\n  }\n}\n\nStageInfo.contextType = Store;\n\nexport default StageInfo;\n","import React, {PureComponent} from \"react\";\nimport {ElementType} from \"../constants\";\nimport {withRouter} from \"react-router-dom\";\n\nclass AddItem extends PureComponent {\n  render() {\n    const {type, history, parentKey} = this.props;\n    const {STAGE, STEP, STAGE__ROUTE, STEP_ROUTE} = ElementType;\n    const isStage = type === STAGE;\n    const onAdd = isStage ? () => history.push(`/add/${STAGE__ROUTE}`) : () => history.push(`/add/${STEP_ROUTE}/${parentKey}`);\n    return (\n      <footer className=\"add-item\">\n        <h2 className=\"visually-hidden\">Добавление {isStage ? `${STAGE}а` : `${STEP}а`}</h2>\n        <button className=\"add-item__button\" type=\"button\" onClick={onAdd}><span>Добавить {isStage ? STAGE : STEP}</span></button>\n      </footer>\n    )\n  }\n}\n\nexport default withRouter(AddItem);\n","import React, {PureComponent} from \"react\";\nimport Step from \"./Step\";\nimport StageInfo from \"./StageInfo\";\nimport AddItem from \"./AddItem\";\nimport {ElementType} from \"../constants\";\nimport Store from \"../Store\";\n\nclass Stage extends PureComponent {\n  get steps() {\n    const {steps} = this.context;\n    const {items} = this.props;\n    return items.reduce((stepsList, stepKey) => stepsList.concat(\n      [<Step\n        key={stepKey}\n        id={stepKey}\n        name={steps[stepKey].name}\n        time={steps[stepKey].time}\n        items={steps[stepKey].items}\n      />]\n    ), [])\n  }\n  render() {\n    const {name, time, employee, items, id} = this.props;\n    return (\n      <section className=\"stage process__stage\">\n        <StageInfo name={name} time={time} employee={employee} items={items}/>\n        {this.steps}\n        {items.length < 3 ? <AddItem type={ElementType.STEP} parentKey={id}/> : null}\n      </section>\n    )\n  }\n}\n\nStage.contextType = Store;\n\nexport default Stage;\n","import React, {PureComponent} from \"react\";\nimport Stage from \"./Stage\";\nimport Store from \"../Store\";\n\nclass Layout extends PureComponent {\n  get stages() {\n    const {listOfStages, stages} = this.context;\n    return listOfStages.reduce((stagesList, stageKey) => stagesList.concat(\n      [<Stage\n        key={stageKey}\n        id={stageKey}\n        name={stages[stageKey].name}\n        employee={stages[stageKey].employee}\n        time={stages[stageKey].time}\n        items={stages[stageKey].items}\n      />]\n    ), [])\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <section className=\"process\">\n          <h1 className=\"visually-hidden\">Конструктор процесса</h1>\n          <p className=\"process__start\"><span>Старт</span></p>\n          {this.stages}\n        </section>\n      </div>\n    )\n  }\n}\n\nLayout.contextType = Store;\n\nexport default Layout;\n","import React, {PureComponent} from \"react\";\nimport {ElementType} from \"../constants\";\nimport Store from \"../Store\";\n\nclass Popup extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: ``,\n      employee: ``,\n      time: ``\n    };\n\n    this.handleClose = this.handleClose.bind(this);\n  }\n\n  get type() {\n    const {STAGE__ROUTE, STEP_ROUTE, ITEM_ROUTE, ITEM, STAGE, STEP} = ElementType;\n    switch (this.props.match.params.type) {\n      case STAGE__ROUTE:\n        return STAGE;\n      case STEP_ROUTE:\n        return STEP;\n      case ITEM_ROUTE:\n        return ITEM;\n      default:\n        return null;\n    }\n  }\n\n  render() {\n    const {match} = this.props;\n    const {name, employee, time} = this.state;\n    const action = match.path.indexOf(`add`) !== -1 ? `Создать` : `Редактировать`;\n\n    return (\n      <section className=\"popup\">\n        <h2 className=\"visually-hidden\">Всплывающее окно</h2>\n        <div className=\"popup__overlay\" onClick={this.handleClose}/>\n        <form\n          className=\"popup__form\"\n          onSubmit={this.handleSubmit.bind(this)}\n        >\n          <div className=\"popup__wrapper\">\n            <h2 className=\"popup__title\">{action} {this.type}</h2>\n            <label className=\"popup__label\" htmlFor=\"popup__name\">Название:</label>\n            <input\n              className=\"popup__input-text\"\n              value={name}\n              required\n              type=\"text\"\n              placeholder={`Название ${this.type}а..`}\n              id=\"popup__name\"\n              onChange={(evt) => this.setState({name: evt.target.value})}\n            />\n            <label className=\"popup__label\" htmlFor=\"popup__employee\">Ответственный:</label>\n            <input\n              className=\"popup__input-text\"\n              value={employee}\n              required\n              type=\"text\"\n              placeholder=\"Иванов Иван..\"\n              id=\"popup__employee\"\n              onChange={(evt) => this.setState({employee: evt.target.value})}\n            />\n            <label className=\"popup__label\" htmlFor=\"popup__time\">Время на выполнение(ЧЧ:ММ):</label>\n            <input\n              className=\"popup__input-text\"\n              value={time}\n              required pattern=\"[0-9]{2}[:][0-9]{2}\"\n              type=\"text\"\n              placeholder=\"45:00\"\n              id=\"popup__time\"\n              onChange={(evt) => this.setState({time: evt.target.value})}\n            />\n            <div className=\"popup__buttons\">\n              <button className=\"popup__button popup__button--cancel\" type=\"button\" onClick={this.handleClose}>Отмена\n              </button>\n              <button className=\"popup__button popup__button--submit\" type=\"submit\">Сохранить</button>\n            </div>\n          </div>\n        </form>\n      </section>\n    )\n  }\n\n  handleClose() {\n    this.props.history.goBack();\n  }\n\n  handleSubmit(evt) {\n    const form = evt.currentTarget;\n    evt.preventDefault();\n    if (form.checkValidity() === false) {\n      evt.stopPropagation();\n    } else {\n      evt.preventDefault();\n      const {name, employee, time} = this.state;\n      const {STAGE, STEP, ITEM} = ElementType;\n      switch (this.type) {\n        case STAGE:\n          this.context.addStage({name, employee, time});\n          break;\n        case STEP:\n          this.context.addStep({name, employee, time}, this.props.match.params.parentKey);\n          break;\n        case ITEM:\n          this.context.addItem({name, employee, time}, this.props.match.params.parentKey);\n          break;\n      }\n      this.props.history.push(`/`);\n    }\n  }\n\n}\n\nPopup.contextType = Store;\n\nexport default Popup;\n","import React, {Component} from 'react';\nimport \"./scss/style.scss\";\nimport Layout from \"./components/Layout\";\nimport {BrowserRouter as Router, Route} from \"react-router-dom\";\nimport Popup from \"./components/Popup\";\nimport AddItem from \"./components/AddItem\";\nimport {ElementType} from \"./constants\";\nimport Store from \"./Store\";\nimport uuid from \"uuid/v4\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      listOfStages: [],\n      stages: {},\n      steps: {},\n      elements: {}\n    };\n    this.api = {\n      saveState: this.saveState.bind(this),\n      addStage: this.addStage.bind(this),\n      addStep: this.addStep.bind(this),\n      addItem: this.addItem.bind(this)\n    }\n  }\n\n  componentDidMount() {\n    this.loadState();\n  }\n\n  componentDidUpdate() {\n    this.saveState();\n  }\n\n  render() {\n    return (\n      <Router basename={process.env.PUBLIC_URL}>\n        <Store.Provider value={Object.assign({}, this.state, this.api)}>\n          <Layout/>\n          <AddItem type={ElementType.STAGE}/>\n          <Route path=\"/add/:type/:parentKey?\" component={Popup}/>\n        </Store.Provider>\n      </Router>\n    );\n  }\n\n  saveState() {\n    localStorage.setItem(`state`, JSON.stringify(this.state));\n  }\n\n  loadState() {\n    const state = localStorage.getItem(`state`);\n    if (state !== null) {\n      this.setState(JSON.parse(state));\n    }\n  }\n\n  addStage(data) {\n    const newStages = JSON.parse(JSON.stringify(this.state.stages));\n    const newKey = uuid();\n    newStages[newKey] = Object.assign({}, data, {items: []});\n    const newListOfStages = this.state.listOfStages.slice();\n    newListOfStages.push(newKey);\n    this.setState({listOfStages: newListOfStages,stages: newStages});\n  }\n\n  addStep(data, stageKey) {\n    const newSteps = JSON.parse(JSON.stringify(this.state.steps));\n    const newKey = uuid();\n    newSteps[newKey] = Object.assign({}, data, {items: []});\n    const newItems = this.state.stages[stageKey].items.slice();\n    newItems.push(newKey);\n    const newStages = JSON.parse(JSON.stringify(this.state.stages));\n    newStages[stageKey].items = newItems;\n    this.setState({stages: newStages, steps: newSteps});\n  }\n\n  addItem(data, stepKey) {\n    const newElements = JSON.parse(JSON.stringify(this.state.elements));\n    const newKey = uuid();\n    newElements[newKey] = data;\n    const newItems = this.state.steps[stepKey].items.slice();\n    newItems.push(newKey);\n    const newSteps = JSON.parse(JSON.stringify(this.state.steps));\n    newSteps[stepKey].items = newItems;\n    this.setState({steps: newSteps, elements: newElements});\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById(`root`));\n"],"sourceRoot":""}